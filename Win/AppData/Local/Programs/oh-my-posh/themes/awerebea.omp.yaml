---
version: 2
"$schema": https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

final_space: true
console_title_template: "{{if .Root}}(Admin){{end}} {{.PWD}}"

blocks:
- type: prompt
  alignment: left
  newline: true
  segments:
  - type: os
    foreground: "#d3d7cf"
    style: plain
    template: "{{.Icon}}{{ if .WSL }} {{ end }} "

  - type: git
    foreground: "#5FD700"
    background: transparent
    style: plain
    properties:
      branch_ahead_icon: "<#88C0D0>⇡</>"
      branch_behind_icon: "<#88C0D0>⇣</>"
      branch_icon: " "
      branch_identical_icon: "≡ "
      branch_gone_icon: "≢ "
      branch_max_length: 25
      truncate_symbol: "…"
      commit_icon: " "
      tag_icon: " "
      rebase_icon: " "
      cherry_pick_icon: " "
      revert_icon: " "
      merge_icon: " "
      no_commits_icon: " "
      github_icon: " "
      gitlab_icon: " "
      bitbucket_icon: " "
      azure_devops_icon: " "
      codecommit_icon: " "
      codeberg_icon: " "
      git_icon: " "
      fetch_stash_count: true
      fetch_status: true
      fetch_upstream_icon: true
    template: >
      {{ .HEAD }}{{if .BranchStatus }} {{ .BranchStatus }}{{
        end
      }}{{ if gt .StashCount 0 }}  {{ .StashCount }}{{
        end
      }}{{ if .Staging.Changed }} <#D7AF00></>{{
        end
      }}{{ if .Staging.Added }} <#5FD700>+{{ .Staging.Added }}</>{{
        end
      }}{{ if .Staging.Modified }} <#D7AF00>~{{ .Staging.Modified }}</>{{
        end
      }}{{ if .Staging.Deleted }} <#F38BA8>-{{ .Staging.Deleted }}</>{{
        end
      }}{{ if .Staging.Unmerged }} <#F38BA8>x{{ .Staging.Unmerged }}</>{{
        end
      }}{{ if .Staging.Untracked }} <#00AFFF>?{{ .Staging.Untracked }}</>{{
        end
      }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{
        end
      }}{{ if .Working.Changed }} <#D7AF00></>{{
        end
      }}{{ if .Working.Added }} <#5FD700>+{{ .Working.Added }}</>{{
        end
      }}{{ if .Working.Modified }} <#D7AF00>~{{ .Working.Modified }}</>{{
        end
      }}{{ if .Working.Deleted }} <#F38BA8>-{{ .Working.Deleted }}</>{{
        end
      }}{{ if .Working.Unmerged }} <#F38BA8>x{{ .Working.Unmerged }}</>{{
        end
      }}{{ if .Working.Untracked }} <#00AFFF>?{{ .Working.Untracked }}</>{{
        end
      }}{{ if true }} {{
        end
      }}

- type: prompt
  alignment: right
  filler: "<#444444>·</>"
  segments:
  - type: node
    foreground: "#689f63"
    background: transparent
    properties:
      fetch_version: true
    style: plain
    template: "  {{ if .PackageManagerIcon }}{{ .PackageManagerIcon }} {{ end }}{{ .Full }}"
  - type: go
    foreground: "#00acd7"
    background: transparent
    properties:
      fetch_version: true
    style: plain
    template: " {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
  - type: julia
    foreground: "#4063D8"
    background: transparent
    properties:
      fetch_version: true
    style: plain
    template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
  - type: python
    foreground: "#00AFAF"
    background: transparent
    properties:
      display_mode: files
      fetch_virtual_env: false
    style: plain
    template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ if .Venv }} {{ .Venv }}{{
      end }}{{ end }}"
  - foreground: "#AE1401"
    background: transparent
    properties:
      display_mode: files
      fetch_version: true
    style: plain
    template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
    type: ruby
  - foreground: "#FEAC19"
    background: transparent
    properties:
      display_mode: files
      fetch_version: false
    style: plain
    template: " {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
    type: azfunc
  - background_templates:
    - '{{if contains "default" .Profile}}#FFA400{{end}}'
    - '{{if contains "jan" .Profile}}#f1184c{{end}}'
    foreground: "#ffffff"
    background: transparent
    properties:
      display_default: false
    style: plain
    template: "  {{ .Profile }}{{ if .Region }}@{{ .Region }}{{ end }}"
    type: aws
  - foreground: "#111111"
    background: "#ffff66"
    style: plain
    template: "  "
    type: root
  - foreground: "#87875F"
    background: transparent
    style: plain
    template: "  {{ .FormattedMs }} "
    type: executiontime
  - foreground: "#D70000"
    background: transparent
    properties:
      always_enabled: true
    style: plain
    template: "{{ if gt .Code 0 }} ✘ {{ .Meaning }} ({{ .Code }}){{ else }}{{ end }} "
    type: exit
  - foreground: "#5F8787"
    background: transparent
    style: plain
    template: "  {{ .CurrentDate | date .Format }} "
    type: time

- type: prompt
  alignment: left
  newline: true
  segments:
  - type: path
    foreground: "#0087AF"
    background: transparent
    style: plain
    properties:
      style: full
    template: "{{ .Path }} "

- type: prompt
  alignment: left
  newline: true
  segments:
  - type: text
    foreground: "#5FD700"
    background: transparent
    foreground_templates:
    - "{{ if gt .Code 0 }}#D70000{{ end }}"
    style: plain
    properties:
      always_enabled: true
    template: "❯"

transient_prompt:
  foreground: "#5FD700"
  foreground_templates:
  - "{{ if gt .Code 0 }}#D70000{{ end }}"
  background: transparent
  filler: "<#444444>·</>"
  template: "❯ "
